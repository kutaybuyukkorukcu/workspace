package com.phexum.eclipse.plugin.handler;
import java.util.Iterator;


import com.phexum.sdk.*;

@PhexumService(name = "Nlp_Service")
public class NlpServiceApplication {

	INlpClient nlp = PhexumApi.getInstance().getNlpClient();
	IParser parser = nlp.createParser(new IRuleExecutor() {}, true);

	@PhexumEndPoint(path = "parse")
	public DataModel parse(DataModel request) {
		DataModel response = DataModel.create("number", 2, "number2", 3);
		String text = request.getAs("text");
		
		TokenList list = parser.parse(text);
		
		for (Iterator<Token> iterator = list.iterator(); iterator.hasNext();) {
			Token t = iterator.next();
			System.out.println(t.getText() + " - " + t.getTagType());
		}
		
		for(Token t : list)
		response.put("first", t.getMeta().getRoot());
		
		return response;
		}
			
	}

